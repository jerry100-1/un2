(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pro/newProAdd"],{"09d0":function(e,t,o){"use strict";o.r(t);var n=o("98cc"),a=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);t["default"]=a.a},2218:function(e,t,o){},"3e0d":function(e,t,o){"use strict";o.r(t);var n=o("5428"),a=o("09d0");for(var r in a)"default"!==r&&function(e){o.d(t,e,function(){return a[e]})}(r);o("c6cd");var i=o("2877"),c=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports},5428:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"98cc":function(e,t,o){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=void 0,a={data:function(){var e=this.getDate({format:!0});return{index:0,timeSeller:!1,date:e,date3:e,time:"12:01",isCheck:!1,isreq:!1,shopObj:{},initNum:[0,0,0],cateId2:"",cateId3:"",sellerPrice:"",sellerNumber:"",brandId:"",sharingofEmployment:"",produceCity:"",produceProvince:"",proId:"",index2:0,isPackage:2,array4:["联盟支付","特约支付"],shopName:"",shopIntr:"",shopPrice:"",price:"",skoce:"",proWeight:0,expressConfig:1,setTimeSell:1,keyWord:"",proImgs:[],shopDetails:"",proDetailsImg:[],shopBrand:[{brandname:""}],shopBrandIndex:0,shopClassify:["联盟商家"],shopIndex:0,twoCate:[{catename:""}],twoIndex:0,productRatio:0,threeCate:[{catename:""}],threeIndex:0,provinceList:[{proName:""}],provinceIndex:0,cityList:[{proName:""}],cityIndex:0}},computed:{startDate:function(){return n.getDate("start")},endDate:function(){return n.getDate("end")},startDate3:function(){return n.getDate("start")},endDate3:function(){return n.getDate("end")}},methods:{bindPickerChange:function(t){console.log(e("picker发送选择改变，携带值为",t.target.value," at pages\\pro\\newProAdd.vue:464")),n.index=t.target.value},bindPickerChanges:function(t){n.index=t.detail.value,console.log(e("可以传data-xx:xx",t.currentTarget.dataset.index,"\n默认传过来的是下标：",t.detail.value,"\n也可以传普通json传过来的id等：",t.currentTarget.dataset.id," at pages\\pro\\newProAdd.vue:469"))},bindDateChange:function(t){n.date=t.target.value,console.log(e("你好,你选择的时间是"+n.date," at pages\\pro\\newProAdd.vue:473"))},bindDateChange3:function(t){n.date3=t.target.value,console.log(e("你好,你选择的时间3是"+n.date3," at pages\\pro\\newProAdd.vue:478"))},bindTimeChange:function(e){n.time=e.target.value},getDate:function(e){var t=new Date,o=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return"start"===e?o-=60:"end"===e&&(o+=2),n=n>9?n:"0"+n,a=a>9?a:"0"+a,"".concat(o,"-").concat(n,"-").concat(a)},bindPickerChange2:function(t){console.log(e("picker发送选择改变，携带值为",n.array4[t.target.value]," at pages\\pro\\newProAdd.vue:500")),n.index2=t.target.value,n.carNumStart=n.array4[t.target.value],console.log(e("车牌号的首位是"+n.carNumStart," at pages\\pro\\newProAdd.vue:504"))},expressFun:function(e){n.expressConfig=1==e.detail.value.length?1:2},expressFun2:function(t){console.log(e("当前的checkbox的值是"+t.detail.value," at pages\\pro\\newProAdd.vue:513")),n.setTimeSell=1==t.detail.value?1:2,1==n.setTimeSell?n.timeSeller=!0:n.timeSeller=!1},expressFun3:function(e){},isCheckChange:function(){n.isCheck=!n.isCheck},shopBrandChange:function(){},limit:function(e){var t="";t=(e/1048576).toFixed(2);var o=t+"",n=o.indexOf("."),a=o.substr(n+1,2);return"00"==a?o.substring(0,n)+o.substr(n+3,2):t},provinceListChange:function(e){this.provinceIndex=e.detail.value,this.citySearch()},cityListChange:function(e){this.cityIndex=e.detail.value},proRatio:function(e){this.productRatio=e},citySearch:function(){var e=this;e.$ajax({url:"/shopProduct/getCommonAddressCityList",method:"POST",data:{proCode:e.provinceList[e.provinceIndex].code},success:function(t){if(e.cityList=t,0==e.initNum[2])for(var o in e.initNum[2]=1,t)if(e.produceCity==t[o].code){e.cityIndex=o;break}}})},getBytesLength:function(e){for(var t=e.length,o=0;o<e.length;o++)e.charCodeAt(o)>255&&t++;return t},proImgsChoose:function(e){var t=this;1==e&&t.proImgs.length>4?o.showToast({title:"商品图片最多上传五张",icon:"none"}):o.chooseImage({count:1,sizeType:["original","compressed"],success:function(n){t.limit(n.tempFiles[0].size)>3?o.showToast({title:"图片太大",icon:"none"}):t.$ajax({uploadFile:!0,formData:{fileName:"/product/"},filePath:n.tempFilePaths[0],success:function(o){1==e?t.proImgs.push(o):t.proDetailsImg.push(o)}})}})},uploadImg:function(t,n){var a=this;o.showLoading({title:"加载中"}),a.$ajax({url:"/commonUpload/upload",method:"POST",data:{file:t,fileName:"/product/"},success:function(t){console.log(e(t," at pages\\pro\\newProAdd.vue:650")),o.hideLoading()}})},del:function(t,o){var n=this;console.log(e(t," at pages\\pro\\newProAdd.vue:659")),1==o?n.proImgs.splice(t,1):n.proDetailsImg.splice(t,1)},shopClassifyChange:function(e){this.shopIndex=e.detail.value},selectThree:function(e){var t=this;t.$ajax({url:"/shopProduct/getByThreeCate",method:"POST",data:{cateSource:5,cid:e},success:function(e){if(t.threeCate=e,0==t.initNum[0])for(var o in t.initNum[0]=1,t.threeCate)if(t.cateId2==t.threeCate[o].cateid){t.threeIndex=o;break}}})},twoCateFun:function(e){var t=this;t.twoIndex=e.detail.value,t.selectThree(t.twoCate[t.twoIndex].cid)},threeCateFun:function(e){this.threeIndex=e.detail.value},init:function(){var e=this;e.$ajax({url:"/shopProduct/getSelectShopProductBrand",method:"POST",success:function(t){if(e.shopBrand=t,0==e.initNum[1])for(var o in e.initNum[1]=1,t)if(e.brandId==t[o].brandid){e.shopBrandIndex=o;break}}}),e.$ajax({url:"/shopProduct/getByTwoCate",method:"POST",data:{cateId:3},success:function(t){if(e.twoCate=t,0==e.initNum[0])for(var o in e.twoCate)if(e.cateId2==e.twoCate[o].cateid){e.twoIndex=o;break}e.selectThree(e.twoCate[e.twoIndex].cid)}}),e.$ajax({url:"/shopProduct/getCommonAddressProvinceList",method:"POST",success:function(t){if(e.provinceList=t,0==e.initNum[2])for(var o in t)if(e.produceProvince==t[o].code){e.provinceIndex=o;break}e.citySearch()}})},save:function(){var t=this;console.log(e(0," at pages\\pro\\newProAdd.vue:771")),t.shopName&&t.price&&t.shopPrice&&0!=t.proImgs.length&&t.skoce&&0!=t.proDetailsImg.length?t.isreq||(t.isreq=!0,t.$ajax({url:"/shopProduct/saveShopProduct",method:"POST",data:{brandId:t.shopBrand[t.shopBrandIndex].brandid,cateId1:3,cateId2:t.twoCate[t.twoIndex].cateid,cateId3:t.threeCate[t.threeIndex].cateid,expressConfig:t.expressConfig,keyWord:t.keyWord,originalImg:t.proImgs,produceCity:t.cityList[t.cityIndex].code,produceProvince:t.provinceList[t.provinceIndex].code,productDescribeImg:t.proDetailsImg,productId:t.proId||"",productName:t.shopName||"",productRatio:0==t.productRatio?8:15,productTitle:t.shopIntr,productmMinMoney:1*t.price,shopId:t.shopObj.shopId,sumStock:1*t.skoce,weight:t.proWeight,agoraMoney:t.shopPrice},success:function(e){t.isreq=!1,o.showToast({title:"操作成功",icon:"none"}),setTimeout(function(){o.navigateBack({delta:1})},1500)},error:function(){t.isreq=!1}})):o.showToast({title:"请填写完整的信息",icon:"none"})}},onLoad:function(t){n=this,o.getStorage({key:"shopObj",success:function(e){n.shopObj=JSON.parse(e.data)}}),t.proId?(this.proId=t.proId,o.setNavigationBarTitle({title:"商品编辑"}),this.$ajax({url:"/shopProduct/getUpdateProduct",method:"POST",data:{productId:n.proId},success:function(t){console.log(e(t," at pages\\pro\\newProAdd.vue:846")),n.proImgs=t.originalImg,n.shopName=t.productName||"",n.skoce=t.sumStock||"",n.shopIntr=t.productTitle||"",n.keyWord=t.keyWord||"",n.price=t.productmMinMoney||"",n.productRatio=15==t.productRatio?1:0,n.expressConfig=t.expressConfig,n.proWeight=t.weight,n.cateId2=t.cateId2,n.cateId3=t.cateId3,n.brandId=t.brandId,n.shopPrice=t.agoraMoney||"",n.produceCity=t.produceCity,n.produceProvince=t.produceProvince;var o=/<img.*?(?:>|\/>)/gi,a=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,r=[];t.productDescribe&&(r=t.productDescribe.match(o)),console.log(e(r," at pages\\pro\\newProAdd.vue:868")),n.$ajax({url:"/shopProduct/getByTwoCate",method:"POST",data:{cateId:3},success:function(e){if(n.twoCate=e,0==n.initNum[0])for(var t in n.twoCate)if(n.cateId2==n.twoCate[t].cateid){n.twoIndex=t;break}n.selectThree(n.twoCate[n.twoIndex].cid)}});for(var i=0;i<r.length;i++){var c=r[i].match(a);console.log(e(c,"111"," at pages\\pro\\newProAdd.vue:890")),n.proDetailsImg.push(c[1])}n.init()}})):(n.initNum=[1,1,1],n.init())},onShow:function(){}};t.default=a}).call(this,o("0de9")["default"],o("6e42")["default"])},c6cd:function(e,t,o){"use strict";var n=o("2218"),a=o.n(n);a.a}},[["553f","common/runtime","common/vendor"]]]);